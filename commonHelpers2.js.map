{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["// Class for storing form input field data to the local Storage.\n\nclass FeedbackFormState {\n    static localStorageKey = 'feedback-form-state';\n  \n    #form = {}; \n    #inputs = []; \n    #formData = {}; \n  \n    constructor(form) {\n      if (form) this.#inputs = form.querySelectorAll('input, textarea');\n      this.#form = form;\n  \n      if (this.#inputs) {\n        this.#form.addEventListener('submit', this.onSubmitForm.bind(this));\n        this.#form.addEventListener('input', this.onInput.bind(this));\n      }\n    }\n\n    destroy() {\n      if (this.#inputs) {\n        this.#form.removeEventListener('submit', this.onSubmitForm.bind(this));\n        this.#form.removeEventListener('input', this.onInput.bind(this));\n      }\n    }\n  \n    restoreData() {\n      this.#getDataFromLocalStorage();\n      this.#insertDataToForm();\n    }\n\n    onInput(event) {\n      this.#inputs.forEach(input => {\n        if (input.name) {\n          this.#formData[input.name] =\n            event.currentTarget.elements[input.name].value.trim();\n        }\n      });\n\n      this.#saveDataToStorage();\n    }\n  \n    onSubmitForm(event) {\n      event.preventDefault();\n      if (!this.#isFormFilled()) {\n        return alert('Fill please all fields');\n      }\n      console.log('submit data: ', this.#formData);\n      localStorage.removeItem(FeedbackFormState.localStorageKey);\n      this.#formData = {};\n      event.currentTarget.reset();\n    }\n  \n    #getDataFromLocalStorage() {\n      const strSavedData = localStorage.getItem(\n        FeedbackFormState.localStorageKey\n      );\n      this.#formData = strSavedData ? JSON.parse(strSavedData) : {};\n    }\n  \n    #insertDataToForm() {\n      const dataKeys = Object.keys(this.#formData);\n  \n      dataKeys.forEach(key => {\n        if (this.#form.elements[key]) {\n          this.#form.elements[key].value = this.#formData[key];\n        }\n      });\n    }\n  \n    #saveDataToStorage() {\n      localStorage.setItem(\n        FeedbackFormState.localStorageKey,\n        JSON.stringify(this.#formData)\n      );\n    }\n  \n    #isFormFilled() {\n      let result = true;\n      this.#inputs.forEach(input => {\n        result &&= this.#form.elements[input.name].value.trim();\n      });\n      return result;\n    }\n  }\n  \nconst feedbackForm = document.querySelector('.feedback-form');\nconst formstate = new FeedbackFormState(feedbackForm);\nformstate.restoreData();\n"],"names":["_FeedbackFormState","form","__privateAdd","_getDataFromLocalStorage","_insertDataToForm","_saveDataToStorage","_isFormFilled","_form","_inputs","_formData","__privateSet","__privateGet","__privateMethod","getDataFromLocalStorage_fn","insertDataToForm_fn","event","input","saveDataToStorage_fn","isFormFilled_fn","strSavedData","key","result","__publicField","FeedbackFormState","feedbackForm","formstate"],"mappings":"2pBAEA,MAAMA,EAAN,MAAMA,CAAkB,CAOpB,YAAYC,EAAM,CA4ClBC,EAAA,KAAAC,GAOAD,EAAA,KAAAE,GAUAF,EAAA,KAAAG,GAOAH,EAAA,KAAAI,GAxEAJ,EAAA,KAAAK,EAAQ,CAAA,GACRL,EAAA,KAAAM,EAAU,CAAA,GACVN,EAAA,KAAAO,EAAY,CAAA,GAGNR,GAAMS,EAAA,KAAKF,EAAUP,EAAK,iBAAiB,iBAAiB,GAChES,EAAA,KAAKH,EAAQN,GAETU,EAAA,KAAKH,KACPG,EAAA,KAAKJ,GAAM,iBAAiB,SAAU,KAAK,aAAa,KAAK,IAAI,CAAC,EAClEI,EAAA,KAAKJ,GAAM,iBAAiB,QAAS,KAAK,QAAQ,KAAK,IAAI,CAAC,EAE/D,CAED,SAAU,CACJI,EAAA,KAAKH,KACPG,EAAA,KAAKJ,GAAM,oBAAoB,SAAU,KAAK,aAAa,KAAK,IAAI,CAAC,EACrEI,EAAA,KAAKJ,GAAM,oBAAoB,QAAS,KAAK,QAAQ,KAAK,IAAI,CAAC,EAElE,CAED,aAAc,CACZK,EAAA,KAAKT,EAAAU,GAAL,WACAD,EAAA,KAAKR,EAAAU,GAAL,UACD,CAED,QAAQC,EAAO,CACbJ,EAAA,KAAKH,GAAQ,QAAQQ,GAAS,CACxBA,EAAM,OACRL,EAAA,KAAKF,GAAUO,EAAM,IAAI,EACvBD,EAAM,cAAc,SAASC,EAAM,IAAI,EAAE,MAAM,OAE3D,CAAO,EAEDJ,EAAA,KAAKP,EAAAY,GAAL,UACD,CAED,aAAaF,EAAO,CAElB,GADAA,EAAM,eAAc,EAChB,CAACH,EAAA,KAAKN,EAAAY,GAAL,WACH,OAAO,MAAM,wBAAwB,EAEvC,QAAQ,IAAI,gBAAiBP,EAAA,KAAKF,EAAS,EAC3C,aAAa,WAAWT,EAAkB,eAAe,EACzDU,EAAA,KAAKD,EAAY,IACjBM,EAAM,cAAc,OACrB,CAiCF,EA/ECR,EAAA,YACAC,EAAA,YACAC,EAAA,YA8CAN,EAAA,YAAAU,EAAwB,UAAG,CACzB,MAAMM,EAAe,aAAa,QAChCnB,EAAkB,eAC1B,EACMU,EAAA,KAAKD,EAAYU,EAAe,KAAK,MAAMA,CAAY,EAAI,GAC5D,EAEDf,EAAA,YAAAU,EAAiB,UAAG,CACD,OAAO,KAAKH,EAAA,KAAKF,EAAS,EAElC,QAAQW,GAAO,CAClBT,EAAA,KAAKJ,GAAM,SAASa,CAAG,IACzBT,EAAA,KAAKJ,GAAM,SAASa,CAAG,EAAE,MAAQT,EAAA,KAAKF,GAAUW,CAAG,EAE7D,CAAO,CACF,EAEDf,EAAA,YAAAY,EAAkB,UAAG,CACnB,aAAa,QACXjB,EAAkB,gBAClB,KAAK,UAAUW,EAAA,KAAKF,EAAS,CACrC,CACK,EAEDH,EAAA,YAAAY,EAAa,UAAG,CACd,IAAIG,EAAS,GACb,OAAAV,EAAA,KAAKH,GAAQ,QAAQQ,GAAS,CAC5BK,MAAWV,EAAA,KAAKJ,GAAM,SAASS,EAAM,IAAI,EAAE,MAAM,OACzD,CAAO,EACMK,CACR,EAhFDC,EADEtB,EACK,kBAAkB,uBAD7B,IAAMuB,EAANvB,EAoFA,MAAMwB,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAY,IAAIF,EAAkBC,CAAY,EACpDC,EAAU,YAAa"}